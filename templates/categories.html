{% extends 'base.html' %} <h3 class="mb-3">Category Configuration</h3>
<div class="card mb-4">
  <div class="card-body">
    <form method="post" class="row gy-2 gx-2 align-items-end">
      <div class="col-12 col-md-6">
        <label class="form-label">Category Name</label>
        <input class="form-control" type="text" name="name" placeholder="e.g. Aftersales" required>
      </div>
      <div class="col-12 col-md-2 d-grid">
        <button class="btn btn-primary">
          <i class="bi bi-plus-lg me-1"></i>Add </button>
      </div>
    </form>
  </div>
</div>
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <span>Category List</span>
    <span class="badge text-bg-secondary">{{ cats|length }} items</span>
  </div>
  <div class="table-responsive">
    <table class="table table-hover align-middle mb-0">
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Value</th>
          <th>Label</th>
          <th>Description</th>
          <th>Custom</th>
          <th>Active</th>
          <th>Order</th>
          <th style="width:180px">Action</th>
        </tr>
      </thead>
      <tbody> {% for i,c in enumerate(cats) %} <tr>
          <td>{{ i+1 }}</td>
          <td class="fw-medium">{{ c.name }}</td>
          <td>
            <code>{{ c.value }}</code>
          </td>
          <td>
            <code>{{ c.label }}</code>
          </td>
          <td class="text-secondary">{{ c.description }}</td>
          <td>{{ 'Yes' if c.custom else 'No' }}</td>
          <td>
            <span class="badge {{ 'text-bg-success' if c.isActive else 'text-bg-secondary' }}">{{ 'Active' if c.isActive else 'Inactive' }}</span>
          </td>
          <td>{{ c.order }}</td>
          <td>
            <form class="d-inline" method="post" action="{{ url_for('categories.move', doc_id=c._id, direction='up') }}">
              <button class="btn btn-sm btn-outline-light" title="Up">⬆</button>
            </form>
            <form class="d-inline" method="post" action="{{ url_for('categories.move', doc_id=c._id, direction='down') }}">
              <button class="btn btn-sm btn-outline-light" title="Down">⬇</button>
            </form>
            <form class="d-inline" method="post" action="{{ url_for('categories.delete', doc_id=c._id) }}" onsubmit="return confirm('Delete this category?')">
              <button class="btn btn-sm btn-outline-danger" title="Delete">
                <i class="bi bi-trash"></i>
              </button>
            </form>
          </td>
        </tr> {% else %} <tr>
          <td colspan="9" class="text-center text-secondary py-4">No data.</td>
        </tr> {% endfor %} </tbody>
    </table>
  </div>
</div> {% endblock %}